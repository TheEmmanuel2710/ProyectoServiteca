{% load static %}
<script src="{% static '../static/css/app.css' %}"></script>
<header>
  <img src="../media/Logo.png" id="logo" alt="Logo">
  <nav class="navigation">
    <a href="/">Home</a>
    <button class="btnLogin-popup" id="colorFondo">Login</button>
  </nav>
</header>

<div style="position: sticky; z-index: 9999; display: grid; place-items: center;" id="login">
  <div class="wrapper" id="wrp" style="margin: 5% auto; z-index: 2000; top: 70px; max-width: 300px;">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <span class="icon-close"><ion-icon name="close-outline"></ion-icon></span>

    <div class="form-box login">
      <h2>Login</h2>
      <form id="demo-form" action="/login/" method="post">
        {% csrf_token %}
        <div class="input-box">
          <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
          <input type="text" id="txtUsername" name="txtUsername" required />
          <label for="txtCorreo">Email</label>
        </div>
        <div class="input-box">
          <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
          <input type="password" id="txtPassword" name="txtPassword" required />
          <label for="txtPassword">Contraseña</label>
        </div>
        <div class="remember-forgot">
          <label>
            <input type="checkbox" id="mostarPassword">
            Mostrar Contraseña
          </label>
        </div>
        <br>
        <button class="g-recaptcha btn1" data-sitekey="6LevdIonAAAAAP23toHyirgase9fx1NzOQfOfFSO" data-callback='onSubmit'
          data-action='submit'>Ingresar</button>
      </form>
    </div>
  </div>
</div>
<script>
  function onSubmit(token) {
    document.getElementById("demo-form").submit();
  }
</script>
{% if mensaje %}
<script>
  Swal.fire({
    title: 'Sistema Serviteca',
    text: '{{mensaje}}',
    icon: 'info',
    confirmButtonColor: '#3085d6',
    confirmButtonText: 'Aceptar'
  }).then((result) => {
    if (result.isConfirmed) {
      window.location.href = "/";
    }
  });
</script>
{% endif %}

<script>
  const passwordInput = document.getElementById('txtPassword');
  const rememberMeCheckbox = document.getElementById('mostarPassword');

  rememberMeCheckbox.addEventListener('change', function () {
    if (this.checked) {
      passwordInput.type = 'text';
    } else {
      passwordInput.type = 'password';
    }
  });
</script>
