{% load static%}

<script src="{%static '../static/js/logOut.js' %}"></script>

<nav class="navbar navbar-expand-sm" id="navTecnico">
  <div class="container-fluid">
    <div class="select-menu">
      <div class="select-btn" title="Opciones">
        {% if user.userFoto != "" and user.userFoto != "False" %}
        <img src="../media/{{user.userFoto}}" alt="Foto Usuario" style="width:60px;" class="rounded-pill">
        {% else %}
        <img src="https://objetivoligar.com/wp-content/uploads/2017/03/blank-profile-picture-973460_1280.jpg"
          alt="No foto" style="width:60px;" class="rounded-pill">
        {% endif %}
      </div>
      <ul class="options">
        <li class="option" style="color: white;">
          {{user.email}}
        </li>

        <li class="option">
          <button onclick="tecnico()" class="btn btn-outline-danger" title="Inicio" id="btn-1">Inicio Tecnico</button>
        </li>
        <li class="option">
          <button class="btn btn-outline-danger" id="btn-1" title="Ver Perfil" data-bs-toggle="modal"
            data-bs-target="#perfilModal" onclick="redireccionar('/vistaGestionarPerfilTecnico/')">Ver Perfil</button>
        </li>
       <li class="option">
          <button onclick="salir()" class="btn btn-outline-danger" title="Cerrar Sesión" id="btn-1">Cerrar
            Session</button>
        </li>
      </ul>

    </div>
    <script>
      const optionMenu = document.querySelector(".select-menu"),
        selectBtn = optionMenu.querySelector(".select-btn"),
        options = optionMenu.querySelectorAll(".option"),
        sBtn_text = optionMenu.querySelector(".sBtn-text");
    
      // Agrega un event listener al documento para detectar clics en cualquier lugar
      document.addEventListener("click", function(event) {
        const isInsideOptionMenu = optionMenu.contains(event.target);
    
        // Si el clic no está dentro del menú, ocúltalo
        if (!isInsideOptionMenu) {
          optionMenu.classList.remove("active");
        }
      });
    
      selectBtn.addEventListener("click", function() {
        optionMenu.classList.toggle("active");
      });
    
      options.forEach(option => {
        option.addEventListener("click", function() {
          let selectedOption = option.querySelector(".option-text").innerText;
          sBtn_text.innerText = selectedOption;
    
          optionMenu.classList.remove("active");
        });
      });
    
      function redireccionar(url) {
        window.location.href = url;
      }
    </script>
    
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon" style="background-color: white;"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/vistaGestionarSolicitudesV/" style="color: rgb(255, 255, 255);">Solicitudes
            Vehiculos</a>
        </li>

      </ul>
    </div>
  </div>
</nav>