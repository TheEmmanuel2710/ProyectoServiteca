{% load static %}
<script src="{%static '../static/js/logOut.js' %}"></script>
<nav class="navbar navbar-expand-sm " id="navAsistente">
  <div class="container-fluid">
    <img src="{% static '../static/img/Logo.png'%}" id="logo" alt="Logo">
    <div class="select-menu">
      <div class="select-btn" title="Opciones">
        {% if user.userFoto != "" and user.userFoto != "False" %}
        <img src="../media/{{user.userFoto}}" alt="Foto Usuario" style="width:60px;" class="rounded-pill">
        {% else %}
        <img src="https://objetivoligar.com/wp-content/uploads/2017/03/blank-profile-picture-973460_1280.jpg"
          alt="No foto" style="width:60px;" class="rounded-pill">
        {% endif %}
      </div>
      <ul class="options">
        <li class="option" style="color: white;">
          {{user.email}}
        </li>
        <li class="option">
          <button onclick="asistente()" class="btn btn-outline-danger" title="Inicio" id="btn-1">Inicio
            Asistente</button>
        </li>
        <li class="option">
          <button class="btn btn-outline-danger" id="btn-1" title="Ver Perfil" data-bs-toggle="modal"
            data-bs-target="#perfilModal" onclick="redireccionar('/vistaGestionarPerfilAsistente/')">Ver Perfil</button>
        </li>
        <li class="option">
          <button onclick="salir()" class="btn btn-outline-danger" title="Cerrar Sesión" id="btn-1">Cerrar
            Sesión</button>
        </li>
      </ul>

      <script>
        const optionMenu = document.querySelector(".select-menu"),
          selectBtn = optionMenu.querySelector(".select-btn"),
          options = optionMenu.querySelectorAll(".option"),
          sBtn_text = optionMenu.querySelector(".sBtn-text");

        document.addEventListener("click", function (event) {
          const isInsideOptionMenu = optionMenu.contains(event.target);

          if (!isInsideOptionMenu) {
            optionMenu.classList.remove("active");
          }
        });

        selectBtn.addEventListener("click", function () {
          optionMenu.classList.toggle("active");
        });

        options.forEach(option => {
          option.addEventListener("click", function () {
            let selectedOption = option.querySelector(".option-text").innerText;
            sBtn_text.innerText = selectedOption;

            optionMenu.classList.remove("active");
          });
        });

        function redireccionar(url) {
          window.location.href = url;
        }
      </script>
    </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
      <ion-icon name="menu-outline" id="iconoxd"></ion-icon>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
      <ul class="navbar-nav"> <!-- Dejamos el menú a la izquierda -->
        <li class="nav-item">
          <a class="nav-link" href="/vistaGestionarClientes/" style="color: white;">R.Clientes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/vistaGestionarVehiculos/" style="color: white;" role="button">R.Vehículos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/vistaGestionarFacturas/" role="button" style="color: white;">G.Facturas</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/vistaGestionarServiciosPrestados/" role="button" style="color: white;">G.Servicios
            Solicitados</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../media/manualusuario.pdf" download style="display: flex; align-items: center;">
            Ayuda<i class="bi bi-question-circle"></i>
          </a>
        </li>
      </ul>
    </div>

  </div>
</nav>

<script></script>